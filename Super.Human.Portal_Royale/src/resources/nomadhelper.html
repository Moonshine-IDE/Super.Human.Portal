<html>
  <head>
    <title>Test Links Scoped to Nomad</title>
    <script type="text/javascript">
      const HASH_PREFIX = '#/';
      window.onload = () => {
        var link = GetURLParameter("link");
        if (link)
        {
        		const hrefUrl = new URL(link);
			if (navigator?.serviceWorker?.controller) {
			navigator.serviceWorker.controller.postMessage({
				type: 'openNotesUri',
				payload: {
				notesUri: decodeURIComponent(
					hrefUrl.hash.substring(
					hrefUrl.hash.indexOf(HASH_PREFIX) + HASH_PREFIX.length
					),
				),
				},
			});
			} else {
				console.error('no service worker registered');
			}
        }
      };
      
      function GetURLParameter(sParam)
	  {
			var sPageURL = window.location.search.substring(1);
			var sURLVariables = sPageURL.split('&');
			for (var i = 0; i < sURLVariables.length; i++) 
			{
				var sParameterName = sURLVariables[i].split('=');
				if (sParameterName[0] == sParam) 
				{
					return sParameterName[1];
				}
			}
	  }
    </script>
  </head>
  <body>
  </body>
</html>
