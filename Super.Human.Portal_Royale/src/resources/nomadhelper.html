<!DOCTYPE html>
<html>
  <head>
  <!--  <meta http-equiv="Content-Security-Policy" content="frame-ancestors 'self' domino.venus.startcloud.com;">-->
  </head>
  <body>
  	<script type="text/javascript">
      window.onload = () => {
      	var link = GetURLParameter("link");

      	link = decodeURIComponent(link);
      	openLink(link);
      };
      
      function openLink(link) 
      {
      	 const HASH_PREFIX = '#/';
		 const hrefUrl = new URL(link);
		 if (navigator?.serviceWorker?.controller) {
		 navigator.serviceWorker.controller.postMessage({
			type: 'openNotesUri',
			payload: {
			notesUri: decodeURIComponent(
				hrefUrl.hash.substring(
				hrefUrl.hash.indexOf(HASH_PREFIX) + HASH_PREFIX.length
				),
			),
			},
		});
		} else {
			console.error('no service worker registered');
		}
      }
      
      function GetURLParameter(sParam)
	  {
		var sPageURL = window.location.search.substring(1);
		var sURLVariables = sPageURL.split('&');
		for (var i = 0; i < sURLVariables.length; i++) 
		{
			var urlParam = sURLVariables[i];

			var sParameterName = sURLVariables[i].split('=');
			if (sParameterName[0] == sParam) 
			{
				return sParameterName[1];
			}
		}
	  }
</script>
  </body>
</html>
